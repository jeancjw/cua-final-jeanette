<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Principal Component Analysis (PCA) | Exploring the Airbnb Market in Singapore</title>
  <meta name="description" content="5 Principal Component Analysis (PCA) | Exploring the Airbnb Market in Singapore" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Principal Component Analysis (PCA) | Exploring the Airbnb Market in Singapore" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Principal Component Analysis (PCA) | Exploring the Airbnb Market in Singapore" />
  
  
  

<meta name="author" content="Jeanette Choong" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualising-spatial-distribution-of-listings.html"/>
<link rel="next" href="spatial-clustering.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/PopupTable-0.0.1/popup.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploring Airbnbs in Singapore</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Project Summary</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#research-questions-hypotheses"><i class="fa fa-check"></i><b>2.1</b> Research Questions &amp; Hypotheses</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#research-approach"><i class="fa fa-check"></i><b>2.2</b> Research Approach</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#other-methods"><i class="fa fa-check"></i><b>2.3</b> Other methods</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#setting-up-the-data"><i class="fa fa-check"></i><b>3.1</b> Setting up the data</a></li>
<li class="chapter" data-level="3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#popularity-of-airbnbs"><i class="fa fa-check"></i><b>3.2</b> Popularity of Airbnbs</a><ul>
<li class="chapter" data-level="3.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#number-of-listings-over-time"><i class="fa fa-check"></i><b>3.2.1</b> Number of listings over time</a></li>
<li class="chapter" data-level="3.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#number-of-reviews-over-time"><i class="fa fa-check"></i><b>3.2.2</b> Number of Reviews over time</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#analysis-of-different-variables"><i class="fa fa-check"></i><b>3.3</b> Analysis of different variables</a><ul>
<li class="chapter" data-level="3.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#price"><i class="fa fa-check"></i><b>3.3.1</b> <code>price</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#host_listings_count"><i class="fa fa-check"></i><b>3.3.2</b> <code>host_listings_count</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#property_type"><i class="fa fa-check"></i><b>3.3.3</b> <code>property_type</code></a></li>
<li class="chapter" data-level="3.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#room_type"><i class="fa fa-check"></i><b>3.3.4</b> <code>room_type</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#reviews_per_month"><i class="fa fa-check"></i><b>3.3.5</b> <code>reviews_per_month</code></a></li>
<li class="chapter" data-level="3.3.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#minimum_nights"><i class="fa fa-check"></i><b>3.3.6</b> <code>minimum_nights</code></a></li>
<li class="chapter" data-level="3.3.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#planning_region"><i class="fa fa-check"></i><b>3.3.7</b> <code>planning_region</code></a></li>
<li class="chapter" data-level="3.3.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#planning_area"><i class="fa fa-check"></i><b>3.3.8</b> <code>planning_area</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html"><i class="fa fa-check"></i><b>4</b> Visualising spatial distribution of Listings</a><ul>
<li class="chapter" data-level="4.1" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html#by-planning-region"><i class="fa fa-check"></i><b>4.1</b> By planning region</a></li>
<li class="chapter" data-level="4.2" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html#by-property-type"><i class="fa fa-check"></i><b>4.2</b> By property type</a></li>
<li class="chapter" data-level="4.3" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html#by-minimum-length-of-stay"><i class="fa fa-check"></i><b>4.3</b> By minimum length of stay</a></li>
<li class="chapter" data-level="4.4" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html#by-proximity-to-mrt-stations"><i class="fa fa-check"></i><b>4.4</b> By proximity to MRT stations</a><ul>
<li class="chapter" data-level="4.4.1" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html#load-mrt-data"><i class="fa fa-check"></i><b>4.4.1</b> Load MRT data</a></li>
<li class="chapter" data-level="4.4.2" data-path="visualising-spatial-distribution-of-listings.html"><a href="visualising-spatial-distribution-of-listings.html#assessing-prices-of-listings-based-on-proximity-to-mrt"><i class="fa fa-check"></i><b>4.4.2</b> Assessing prices of listings based on proximity to MRT</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html"><i class="fa fa-check"></i><b>5</b> Principal Component Analysis (PCA)</a><ul>
<li class="chapter" data-level="5.1" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#extract-components-scale-data"><i class="fa fa-check"></i><b>5.1</b> Extract components &amp; scale data</a></li>
<li class="chapter" data-level="5.2" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#pca-using-varimax"><i class="fa fa-check"></i><b>5.2</b> PCA using varimax</a></li>
<li class="chapter" data-level="5.3" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#reflections-on-pca"><i class="fa fa-check"></i><b>5.3</b> Reflections on PCA</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="spatial-clustering.html"><a href="spatial-clustering.html"><i class="fa fa-check"></i><b>6</b> Spatial Clustering</a><ul>
<li class="chapter" data-level="6.1" data-path="spatial-clustering.html"><a href="spatial-clustering.html#aggregation-to-larger-spatial-units"><i class="fa fa-check"></i><b>6.1</b> Aggregation to larger spatial units</a></li>
<li class="chapter" data-level="6.2" data-path="spatial-clustering.html"><a href="spatial-clustering.html#clustering-of-minimum_nights-variable"><i class="fa fa-check"></i><b>6.2</b> Clustering of <code>minimum_nights</code> variable</a><ul>
<li class="chapter" data-level="6.2.1" data-path="spatial-clustering.html"><a href="spatial-clustering.html#building-the-minimum-spanning-tree"><i class="fa fa-check"></i><b>6.2.1</b> Building the Minimum Spanning Tree</a></li>
<li class="chapter" data-level="6.2.2" data-path="spatial-clustering.html"><a href="spatial-clustering.html#clustering-with-skater"><i class="fa fa-check"></i><b>6.2.2</b> Clustering with SKATER</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="spatial-clustering.html"><a href="spatial-clustering.html#clustering-of-price-variable"><i class="fa fa-check"></i><b>6.3</b> Clustering of <code>price</code> variable</a><ul>
<li class="chapter" data-level="6.3.1" data-path="spatial-clustering.html"><a href="spatial-clustering.html#building-the-minimum-spanning-tree-1"><i class="fa fa-check"></i><b>6.3.1</b> Building the Minimum Spanning Tree</a></li>
<li class="chapter" data-level="6.3.2" data-path="spatial-clustering.html"><a href="spatial-clustering.html#clustering-with-skater-1"><i class="fa fa-check"></i><b>6.3.2</b> Clustering with SKATER</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="spatial-clustering.html"><a href="spatial-clustering.html#reflection-on-spatial-clustering"><i class="fa fa-check"></i><b>6.4</b> Reflection on Spatial Clustering</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html"><i class="fa fa-check"></i><b>7</b> Spatial Autocorrelation</a><ul>
<li class="chapter" data-level="7.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#morans-i"><i class="fa fa-check"></i><b>7.1</b> Moran’s I</a></li>
<li class="chapter" data-level="7.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#local-value-of-autocorrelation"><i class="fa fa-check"></i><b>7.2</b> Local value of autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatial-regression.html"><a href="spatial-regression.html"><i class="fa fa-check"></i><b>8</b> Spatial Regression</a><ul>
<li class="chapter" data-level="8.1" data-path="spatial-regression.html"><a href="spatial-regression.html#setting-up-the-regression"><i class="fa fa-check"></i><b>8.1</b> Setting up the regression</a></li>
<li class="chapter" data-level="8.2" data-path="spatial-regression.html"><a href="spatial-regression.html#reflection-on-spatial-autocorrelationregression-method"><i class="fa fa-check"></i><b>8.2</b> Reflection on Spatial Autocorrelation/Regression Method</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="concluding-thoughts.html"><a href="concluding-thoughts.html"><i class="fa fa-check"></i><b>9</b> Concluding thoughts</a></li>
<li class="chapter" data-level="10" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>10</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring the Airbnb Market in Singapore</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="principal-component-analysis-pca" class="section level1">
<h1><span class="header-section-number">5</span> Principal Component Analysis (PCA)</h1>
<p>For this section, I plan to use PCA to understand how the different variables may be correlated. This may provide some insight into the pricing and spatial distribution of the Airbnb listings, which may have been difficult to visualise from the previous sections.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb132-2" data-line-number="2"><span class="kw">library</span>(broom)</a>
<a class="sourceLine" id="cb132-3" data-line-number="3"><span class="kw">library</span>(ggfortify)</a>
<a class="sourceLine" id="cb132-4" data-line-number="4"><span class="kw">library</span>(psych)</a>
<a class="sourceLine" id="cb132-5" data-line-number="5"><span class="kw">library</span>(patchwork)</a></code></pre></div>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1">listings &lt;-<span class="st"> </span><span class="kw">readRDS</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;projdata/listings.rds&quot;</span>))</a></code></pre></div>
<div id="extract-components-scale-data" class="section level2">
<h2><span class="header-section-number">5.1</span> Extract components &amp; scale data</h2>
<p>The following variables were selected: <code>host_response_rate</code>, <code>host_acceptance_rate</code>, <code>host_listings_count</code>, <code>minimum_nights</code>, <code>price</code>, <code>reviews_per_month</code> and <code>review_scores_rating</code>. These variables were selected mostly because they are the few continuous variables in the dataset that would potentially have some effect on one another.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1">pc &lt;-<span class="st"> </span>listings <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">host_response_rate =</span> <span class="kw">as.numeric</span>(host_response_rate), <span class="dt">host_acceptance_rate=</span><span class="kw">as.numeric</span>(host_acceptance_rate), <span class="dt">host_listings_count=</span><span class="kw">as.numeric</span>(host_listings_count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb134-3" data-line-number="3"><span class="st">  </span><span class="kw">drop_na</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(minimum_nights, price, reviews_per_month, review_scores_rating, host_acceptance_rate, host_listings_count, host_response_rate) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb134-5" data-line-number="5"><span class="st">  </span><span class="kw">prcomp</span>(., <span class="dt">center=</span>T, <span class="dt">scale.=</span>T)</a></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">tidy</span>(pc, <span class="st">&quot;pcs&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 7 x 4
##      PC std.dev percent cumulative
##   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1     1   1.18   0.199       0.199
## 2     2   1.14   0.185       0.385
## 3     3   1.04   0.155       0.540
## 4     4   1.01   0.146       0.685
## 5     5   0.916  0.120       0.805
## 6     6   0.843  0.101       0.907
## 7     7   0.808  0.0932      1</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1">listings2 &lt;-<span class="st">  </span>listings <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">host_response_rate =</span> <span class="kw">as.numeric</span>(host_response_rate), <span class="dt">host_acceptance_rate=</span><span class="kw">as.numeric</span>(host_acceptance_rate), <span class="dt">host_listings_count=</span><span class="kw">as.numeric</span>(host_listings_count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb138-3" data-line-number="3"><span class="st">  </span><span class="kw">drop_na</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(minimum_nights, price, reviews_per_month, review_scores_rating, reviews_per_month, host_acceptance_rate, host_listings_count, host_response_rate, planning_region) </a></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion</code></pre>
<p>As I wanted to include planning areas in the components, there was a need to train the data such that they were presented as numerical (1s and 0s), which would then allow for the joining to the other components for analysis.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="kw">library</span>(caret)</a></code></pre></div>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## 
## Attaching package: &#39;caret&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:httr&#39;:
## 
##     progress</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     lift</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1">plnreg &lt;-<span class="st"> </span>listings2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(planning_region) </a>
<a class="sourceLine" id="cb145-3" data-line-number="3">dummy_model &lt;-<span class="st"> </span><span class="kw">dummyVars</span>(<span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> plnreg)</a>
<a class="sourceLine" id="cb145-4" data-line-number="4">dummy_sample &lt;-<span class="st"> </span><span class="kw">predict</span>(dummy_model, <span class="dt">newdata =</span> plnreg) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="st">  </span><span class="kw">as_tibble</span>()</a></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="co"># rename columns</span></a>
<a class="sourceLine" id="cb146-2" data-line-number="2">dummy_sample &lt;-<span class="st"> </span>dummy_sample <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">reg_central =</span> <span class="st">`</span><span class="dt">planning_regionCentral Region</span><span class="st">`</span>, <span class="dt">reg_north=</span> <span class="st">`</span><span class="dt">planning_regionNorth Region</span><span class="st">`</span>, <span class="dt">reg_east =</span> <span class="st">`</span><span class="dt">planning_regionEast Region</span><span class="st">`</span>, <span class="dt">reg_west=</span><span class="st">`</span><span class="dt">planning_regionWest Region</span><span class="st">`</span>, <span class="dt">reg_northeast=</span><span class="st">`</span><span class="dt">planning_regionNorth-East Region</span><span class="st">`</span>)</a></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1">pc &lt;-<span class="st"> </span><span class="kw">cbind</span>(listings2, dummy_sample) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>planning_region) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-3" data-line-number="3"><span class="st">    </span><span class="kw">prcomp</span>(., <span class="dt">center=</span>T, <span class="dt">scale.=</span>T)</a>
<a class="sourceLine" id="cb147-4" data-line-number="4"></a>
<a class="sourceLine" id="cb147-5" data-line-number="5"><span class="kw">tidy</span>(pc, <span class="st">&quot;pcs&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 12 x 4
##       PC  std.dev percent cumulative
##    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1     1 1.42e+ 0  0.167       0.167
##  2     2 1.20e+ 0  0.119       0.287
##  3     3 1.13e+ 0  0.107       0.394
##  4     4 1.04e+ 0  0.0897      0.483
##  5     5 1.03e+ 0  0.0879      0.571
##  6     6 1.01e+ 0  0.0853      0.657
##  7     7 9.87e- 1  0.0812      0.738
##  8     8 9.84e- 1  0.0806      0.818
##  9     9 9.10e- 1  0.0690      0.887
## 10    10 8.39e- 1  0.0587      0.946
## 11    11 8.04e- 1  0.0539      1    
## 12    12 2.37e-15  0           1</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="kw">tidy</span>(pc, <span class="st">&quot;pcs&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb149-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>PC, <span class="dt">y=</span>cumulative)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_hline</span>(<span class="dt">yintercept=</span><span class="fl">0.9</span>, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x=</span>PC, <span class="dt">y=</span>cumulative, <span class="dt">label=</span>PC), <span class="dt">nudge_y =</span> <span class="fl">0.03</span>)</a></code></pre></div>
<p><img src="cua-final-proj-jeanette_files/figure-html/unnamed-chunk-83-1.png" width="1400" /></p>
<p>The scree plot above shows the cumulative variance of the components and a threshold line of 90% explained variance (blue). From the plot, we can see that 90% of the variance is explained somewhere around the ninth component. Hence, I start off by keeping nine components. However, I do note that the scree plot is not exactly very clear (it seems almost linear for most part), perhaps due to the inclusion of the planning regions as components.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="kw">tidy</span>(pc, <span class="st">&quot;variables&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb150-2" data-line-number="2"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> <span class="st">&quot;PC&quot;</span>, <span class="dt">value=</span><span class="st">&quot;value&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 12 x 13
##    column      `1`     `2`      `3`     `4`      `5`      `6`     `7`     `8`
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 host_… -0.146    0.488   0.364   -0.0547  0.149   -2.44e-3 -0.161   0.150 
##  2 host_… -0.185   -0.322   0.538    0.0266  0.0565  -3.72e-4  0.199   0.223 
##  3 host_… -0.144    0.364   0.509    0.0732  0.00633 -1.31e-1 -0.0229  0.233 
##  4 minim…  0.0729  -0.238   0.333   -0.392   0.287    1.37e-1 -0.0390 -0.401 
##  5 price  -0.196   -0.118  -0.00115  0.159  -0.620   -4.46e-2  0.356   0.257 
##  6 reg_c… -0.680   -0.0432 -0.148   -0.0905  0.0682   2.37e-2 -0.0345 -0.148 
##  7 reg_e…  0.371    0.216   0.197    0.473  -0.0954   4.86e-1  0.184  -0.285 
##  8 reg_n…  0.209    0.0256 -0.0106   0.295   0.273   -7.96e-1  0.212  -0.140 
##  9 reg_n…  0.289    0.0801 -0.198   -0.365   0.326    1.66e-1  0.388   0.589 
## 10 reg_w…  0.383   -0.222   0.189   -0.237  -0.408   -1.90e-1 -0.537   0.176 
## 11 revie…  0.0751   0.132   0.166   -0.496  -0.324   -1.53e-1  0.517  -0.372 
## 12 revie… -0.00806  0.577  -0.213   -0.239  -0.206   -7.39e-2 -0.141  -0.0901
## # … with 4 more variables: `9` &lt;dbl&gt;, `10` &lt;dbl&gt;, `11` &lt;dbl&gt;, `12` &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="kw">tidy</span>(pc, <span class="st">&quot;variables&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(PC <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb152-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>column, <span class="dt">y=</span>value))<span class="op">+</span></a>
<a class="sourceLine" id="cb152-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb152-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">fill=</span>(value<span class="op">&gt;=</span><span class="dv">0</span>)), <span class="dt">show.legend =</span> <span class="ot">FALSE</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb152-6" data-line-number="6"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb152-7" data-line-number="7"><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>PC)</a></code></pre></div>
<p><img src="cua-final-proj-jeanette_files/figure-html/unnamed-chunk-85-1.png" width="2000" /></p>
<p>The first component shows that for a positive value for all planning regions other than the central region, <code>reg_central</code> showed a very low value. This suggests that the central region is very different from the other regions, and is perhaps a reflection of the number of listings that are within the central region, which is way more than in other regions. <code>price</code> also showed a low value, which probably suggests that prices are significantly different in the central region as compared to the other regions. Althought we established earlier that price difference were marginal, it could be that this model takes into account the outliers in the Southern Islands, which cost almost $10,000 per night. This amount is nearly 100 times the mean price of an Airbnb in Singapore. We also see a correlation between the <code>host_response_rate</code> and <code>host_acceptance_rate</code> with the <code>reg_central</code>. While these variables were not really explored earlier, it could provide important information, that the listings in the central area are more active than in other areas. Interestingly, a positive value for <code>minimum_nights</code> yield a negative value for <code>reg_central</code> but positive value for all other regions. This could mean that either the central region or the rest of Singapore is more likely to flout the rules. However, on hindsight, this could be a reflection of the sheer number of listings in the central region. Therefore, it may have a lot more listings with <code>minimum_nights</code> that are low as compared to the number of listings of the same kind in the other parts of Singapore. Therefore we can only conclude from the first component that the central area is very different from the other areas in terms of <code>price</code>, <code>minimum_nights</code>, <code>host_response_rate</code> and <code>host_acceptance_rate</code>.</p>
<p>The second component shows that a low value for <code>minimum_nights</code> corresponds to a high value for <code>reviews_per_month</code>, which makes sense because reviews would be more frequent if the length of stay is shorter. It then adds a nuance to the first component by showing that <code>reg_west</code> is somewhat like <code>reg_central</code> in terms of <code>price</code>, <code>minimum_nights</code> and <code>host_listings_count</code>. The correlation with price can be explained by an outlier listing in Tuas that costs almost as much as those in the Southern Islands. The high <code>reviews_per_month</code> is also correlated with the <code>reg_east</code> and <code>east</code>, which suggests that these regions also have a high number of listings that potentially are flouting the rules.</p>
<p>The third component shows that the east and west regions have the different ratings from the other regions, and does not add much more nuance from here on.</p>
<p>Therefore, while the scree plot suggested to keep 9 components, perhaps three would have been sufficient.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="kw">autoplot</span>(pc, <span class="dt">label=</span>F, <span class="dt">x=</span><span class="dv">1</span>, <span class="dt">y=</span><span class="dv">2</span>, <span class="dt">loadings =</span> T, <span class="dt">loadings.label=</span>T)</a></code></pre></div>
<p><img src="cua-final-proj-jeanette_files/figure-html/unnamed-chunk-86-1.png" width="1400" /></p>
<p>From the loadings plot I can confirm that the central region is very different from the rest of Singapore, but it is generally quite difficult to read.</p>
</div>
<div id="pca-using-varimax" class="section level2">
<h2><span class="header-section-number">5.2</span> PCA using varimax</h2>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1">fa &lt;-<span class="st"> </span><span class="kw">cbind</span>(listings2, dummy_sample) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>planning_region) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb154-3" data-line-number="3"><span class="st">  </span><span class="kw">principal</span>(<span class="dt">nfactors=</span><span class="dv">3</span>, <span class="dt">rotate=</span><span class="st">&quot;varimax&quot;</span>)</a></code></pre></div>
<pre><code>## Warning in log(det(r)): NaNs produced</code></pre>
<pre><code>## In factor.stats, the correlation matrix is singular, an approximation is used</code></pre>
<pre><code>## Warning in fa.stats(r = r, f = f, phi = phi, n.obs = n.obs, np.obs = np.obs, :
## In factor.stats, the correlation matrix is singular, and we could not calculate
## the beta weights for factor score estimates</code></pre>
<pre><code>## Warning in principal(., nfactors = 3, rotate = &quot;varimax&quot;): The matrix is not
## positive semi-definite, scores found from Structure loadings</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1">fa</a></code></pre></div>
<pre><code>## Principal Components Analysis
## Call: principal(r = ., nfactors = 3, rotate = &quot;varimax&quot;)
## Standardized loadings (pattern matrix) based upon correlation matrix
##                        RC1   RC3   RC2    h2    u2 com
## minimum_nights        0.09  0.05  0.47 0.235 0.765 1.1
## price                -0.30 -0.05  0.08 0.097 0.903 1.2
## reviews_per_month     0.07  0.31 -0.66 0.536 0.464 1.4
## review_scores_rating  0.14  0.22  0.03 0.072 0.928 1.7
## host_acceptance_rate -0.08  0.73 -0.13 0.554 0.446 1.1
## host_listings_count  -0.27  0.21  0.69 0.589 0.411 1.5
## host_response_rate   -0.09  0.74  0.09 0.564 0.436 1.1
## reg_central          -0.97  0.00 -0.13 0.958 0.042 1.0
## reg_east              0.58  0.25  0.00 0.393 0.607 1.4
## reg_north             0.30 -0.04 -0.02 0.089 0.911 1.0
## reg_northeast         0.40 -0.16 -0.21 0.227 0.773 1.9
## reg_west              0.51 -0.12  0.37 0.411 0.589 1.9
## 
##                        RC1  RC3  RC2
## SS loadings           1.99 1.38 1.36
## Proportion Var        0.17 0.11 0.11
## Cumulative Var        0.17 0.28 0.39
## Proportion Explained  0.42 0.29 0.29
## Cumulative Proportion 0.42 0.71 1.00
## 
## Mean item complexity =  1.4
## Test of the hypothesis that 3 components are sufficient.
## 
## The root mean square of the residuals (RMSR) is  0.11 
##  with the empirical chi square  6435.22  with prob &lt;  0 
## 
## Fit based upon off diagonal values = 0.36</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" data-line-number="1">fa[[<span class="st">&#39;loadings&#39;</span>]] <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-2" data-line-number="2"><span class="st">  </span><span class="kw">unclass</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-3" data-line-number="3"><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">rownames=</span><span class="st">&quot;listings&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-4" data-line-number="4"><span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;component&quot;</span>, <span class="dt">value=</span><span class="st">&quot;value&quot;</span>, <span class="op">-</span>listings) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>listings, <span class="dt">y=</span>value))<span class="op">+</span></a>
<a class="sourceLine" id="cb161-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb161-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">fill=</span>(value<span class="op">&gt;=</span><span class="dv">0</span>)), </a>
<a class="sourceLine" id="cb161-8" data-line-number="8">           <span class="dt">show.legend=</span><span class="ot">FALSE</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb161-9" data-line-number="9"><span class="st">  </span><span class="kw">ylim</span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)<span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb161-10" data-line-number="10"><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>component) <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-11" data-line-number="11"><span class="kw">tidy</span>(pc, <span class="st">&quot;variables&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-12" data-line-number="12"><span class="st">  </span><span class="kw">filter</span>(PC <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-13" data-line-number="13"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>column, <span class="dt">y=</span>value))<span class="op">+</span></a>
<a class="sourceLine" id="cb161-14" data-line-number="14"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-15" data-line-number="15"><span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">fill=</span>(value<span class="op">&gt;=</span><span class="dv">0</span>)), <span class="dt">show.legend =</span> <span class="ot">FALSE</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb161-16" data-line-number="16"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb161-17" data-line-number="17"><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>PC)</a></code></pre></div>
<p><img src="cua-final-proj-jeanette_files/figure-html/unnamed-chunk-88-1.png" width="2000" /></p>
<p>Based on the previous analysis, I changed the number of components to 3 for the varimax method.</p>
<p>The conclusions are the same for the first component as seen from the above plot.</p>
<p>For the second component, we see a similar patterm that a low value for <code>minimum_nights</code> corresponds to a high value for <code>reviews_per_month</code>, which makes sense because reviews would be more frequent if the length of stay is shorter. However, we see that the west is different from the north-east and central regions in terms of reviews per month and host acceptance rate. Low reviews per month in the west suggests that a higher likelihood of flouting the rules.</p>
<p>For the varimax method, it shows that the east region is quite different from the other regions and it correlated with the other variables except for price. This highlights that prices in the east could be very different from the rest of Singapore.</p>
</div>
<div id="reflections-on-pca" class="section level2">
<h2><span class="header-section-number">5.3</span> Reflections on PCA</h2>
<p>I find that to some extent, performing PCA was helpful in understanding and confirming which variables were correlated and which were not. Because of the added dimension, it helped me draw links between variables I did not think were related.</p>
<p>However the challenge was in deciding the number of components to keep. While the scree plot shows that 9 components, I found that it was not very meaningful to go beyond 3 components. My guess is that the scree plot was not a good indication because of the planning regions that I added in as variables. However, there was some useful analysis, that helped to confirm what I found in the previous section, and also gives room for further exploration into other variables that I did not really delve into for this project.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualising-spatial-distribution-of-listings.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial-clustering.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
